# C++ 字符串和字符数组

## 字符串常量与变量

**字符串变量**

+ 字符串是以**空字符 ('\0')结束**的**字符数组**
+ 空字符是自动添加到字符串的内部表示中
+ 在生命字符串变量时，应该为这个空结束符预留一个额外元素空间，如`char strHello[11] = {"helloworld"}`，如果不预留初始化时，编译器会报错数组长度不够初始化的长度



**字符串常量**

+ 字符串常量是一对双引号括起来的字符序列
+ 字符串中每个字符作为一个数组元素存储



在计算机内部机器码中，

```C++
char c1 = 0; 		// 0x00
char c2 = '\0'; 	// 0x00
char c3 = '0';		// 0x30 -> ASCII码 -> 十进制为 48

```



其他常用的字符码

```C++
char c4 = 'A';	// 0x41 -> 65
char c5 = 'a';	// 0X61	-> 97
```



## 字符表示 Unicode

+ UTF-8：1个字节表示字符，可以兼容ASCII码
  + 不同的编码使用不同的长度来表示，可以使用两个字节表示一个字符，但是表示单位仍然为一个字节
  + 无字节序问题 - 当一个字包含多个字节时会存在字节序表示大小端的问题
  + 因为不是定长，所以不方便内部随机访问
+ UTF-16：使用两个字节表示一个字符，宽度变大，能够表示的内容变多
  + 固定为两个字节，所以可以内部随机访问
  + 但是存在字节序的问题，因为一个字由两个字节表示。所以不可作为外部编码
+ UTF-32：使用四个字节表示一个字符
  + 固定长度为四个字节，方便内部随机访问
  + 存在字节序问题，不可作为外部编码



编码错误的根本原因在于编码方式和解码方式的不统一



## 字符串常见操作

使用 `strnlen_s`, `strcpy_s`, `strncpy_s`, `strcat_s` 等API函数，更安全



## C++ 中的 string

C++ 标准库提供了 `string` 类型专门表示字符串





